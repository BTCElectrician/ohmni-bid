# Status

- Phase: implementation
- Review: ChatGPT 5.2 Pro response integrated; doc reviewed for completeness/correctness/trade gaps
- Guardrails: minimal code, maximize SDKs/services, keep files under ~500 lines
- Product notes: Stripe billing integration planned; spreadsheet UI + Excel export stay in scope
- Review packet: `docs/Ohmni_Bid_Final_Review.md` updated with external response + agent review notes
- Build progress:
  - Standardized embeddings default to `text-embedding-3-small`.
  - Added org/membership + walkthrough schema and RLS in `supabase/schema.sql`.
  - Added Supabase auth gating and estimate persistence in the UI.
  - Added walkthrough UI plus `/api/transcribe` and `/api/vision-count` routes.
  - Added assistant draft takeoff panel and `/api/draft-items` endpoint for reviewable line items.
  - Added walkthrough latest-note fetch and estimate chat panel using `/api/ai`.
  - Draft-applied line items now retain `pricing_item_id` when available.
  - Refreshed UI styling with new typography, glass panels, and gradient backgrounds.
  - Archived legacy assets and prior integrations under `legacy/`.
  - Added embeddings backfill script for `pricing_items`.
  - Added one-brain Supabase setup doc and a single-command schema apply script.
  - Added pricing extraction + import scripts with stable `external_ref` support.
  - Removed legacy client branding references and normalized color token naming.
  - Added root wrapper scripts for legacy price sync monitor/email automation.
  - Applied Supabase schema to the new project (via pooler connection).
  - Added walkthrough storage bucket + org-based storage policies to the schema.
  - Imported pricing items into Supabase (295 upserts) and completed embeddings backfill.
  - Added project details form and persisted prepared-by/bid-date in estimate metadata.
  - Expanded Excel export header with project details fields.
  - Clarified Supabase setup/env docs with connection string + key guidance.
  - Added ESLint config, excluded legacy from typecheck, and aligned server Supabase cookie handling.
- Commit log (ahead of origin/main):
  - d57bcac feat: add project details and supabase sync updates
  - 8d3a726 docs(agents): document pricing update workflow
  - 35c91d6 feat(pricing): add extractor/import pipeline with external refs
  - 80d1f12 docs(ops): add one-brain Supabase setup flow
  - a5b1560 docs(status): log current commit stack and next steps
  - f68f106 feat(estimate): persist pricing item ids on line items
  - 0c80bbd feat(chat): add estimator chat panel and latest note fetch
  - 307897b feat(embeddings): add backfill script and update docs
  - bfcb418 feat(estimate): add assistant draft panel and draft-items API
  - 9f757ba Archive legacy assets and register model docs
  - da32c0c Keep Next.js tsconfig updates
  - f92a884 Implement chromium owl theme and walkthrough MVP
- Next steps:
  - Set OpenAI env vars for transcription/vision models in deployment.
  - Push local commits to origin/main when ready.
